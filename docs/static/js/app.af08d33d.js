(function(e){function t(t){for(var n,a,o=t[0],l=t[1],d=t[2],u=0,h=[];u<o.length;u++)a=o[u],r[a]&&h.push(r[a][0]),r[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(h.length)h.shift()();return s.push.apply(s,d||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},r={app:0},s=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"17f1":function(e,t,i){},2646:function(e,t,i){"use strict";var n=i("17f1"),r=i.n(n);r.a},"3f81":function(e,t,i){"use strict";var n=i("9bf3"),r=i.n(n);r.a},"56d7":function(e,t,i){"use strict";i.r(t);i("7f7f"),i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},s=[],a=(i("5c0b"),i("2877")),o={},l=Object(a["a"])(o,r,s,!1,null,null,null),d=l.exports,c=i("8c4f"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"chart",staticClass:"chart"},[i("div",{staticClass:"header"},[i("div",{staticClass:"header-left"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handlerAddGantt}},[e._v("新建")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handlerSaveData}},[e._v("保存")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handlerCheckList}},[e._v("批量添加数据")])],1)]),i("div",{staticClass:"left",style:{width:e.rightLineX+"px"}},[i("leftMenu",{ref:"leftMenu",attrs:{list:e.list,BGScrollTop:e.BGScrollTop},on:{"update:BGScrollTop":function(t){e.BGScrollTop=t},"update:b-g-scroll-top":function(t){e.BGScrollTop=t},TableScrollTop:e.TableScrollTop,handlerRowClick:e.handlerRowClick,milestone:e.handlerMilestone,planProject:e.handlerPlanProject,handlerGroup:e.handlerGroup,handlerEdit:e.handlerEdit,handleGroupAdd:e.handleGroupAdd,handlerExpand:e.handlerExpand,handlerDel:e.handlerDel}}),i("div",{staticClass:"rightLine",style:{left:e.rightLineX+"px"}}),i("div",{ref:"rightLine",staticClass:"rightLine",style:{left:e.rightLineX+"px"},on:{mousedown:e.rightLineMousedown}})],1),i("div",{staticClass:"date",style:{left:e.rightLineX+2+"px"}},[e._l(e.allDays,function(t){return i("div",{key:t.year,staticClass:"years"},e._l(t.month[0],function(n,r){return i("div",{key:n+"zz"+r,staticClass:"month",style:{width:n.length*e.currentDaySize.value+"px"}},[i("div",{staticClass:"month-top"},[e._v(e._s(t.year)+"年"+e._s(r)+"月")])])}),0)}),e.showFixdTopMonth?i("div",{staticClass:"topMonth"},[e._v(e._s(e.fixdTopMonth))]):e._e(),i("div",{staticClass:"allDaysArray"},[i("div",{staticClass:"alldays"},e._l(e.days,function(t,n){return i("div",{key:n+"cc",staticClass:"day",style:{width:e.currentDaySize.value+"px"}},[40==e.currentDaySize.value?[t.today?i("span",{staticClass:"dateNum todayDateNum",staticStyle:{"border-left":"1px solid #d7d7d7"}},[e._v("\n              今天\n            ")]):i("span",{staticClass:"dateNum",class:{weekday:0==t.weekday||6==t.weekday,isHover:t.width>=e.currentLineDay.start&&t.width<=e.currentLineDay.end},style:{borderLeft:0==n?"none":"1px solid #d7d7d7"}},[e._v(e._s(t.date))]),i("span",{staticClass:"dateBG",class:{weekday2:0==t.weekday,weekday1:6==t.weekday,today:t.today},style:{width:e.currentDaySize.value+"px",height:0==t.weekday||6==t.weekday?e.lineBGHeight:"0px"}})]:e._e(),24==e.currentDaySize.value?[i("span",{staticClass:"dateNum",class:{weekday:0==t.weekday||6==t.weekday,isHover:t.width>=e.currentLineDay.start&&t.width<=e.currentLineDay.end,nodBorder:t.width>=e.currentLineDay.start&&t.width<=e.currentLineDay.end}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.width==e.currentLineDay.end&&e.isHover&&1!=t.weekday||t.width==e.currentLineDay.start&&e.isHover&&1!=t.weekday||1==t.weekday,expression:"\n                  (j.width == currentLineDay.end &&\n                    isHover &&\n                    j.weekday != 1) ||\n                    (j.width == currentLineDay.start &&\n                      isHover &&\n                      j.weekday != 1) ||\n                    j.weekday == 1\n                "}],staticStyle:{width:"100%21px",height:"100%"},style:{borderLeft:0==n?"none":"1px solid #d7d7d7"}},[e._v("\n                "+e._s(t.date)+"\n              ")])]),i("span",{staticClass:"dateBG",class:{weekday2:0==t.weekday,weekday1:6==t.weekday,today:t.today},style:{width:e.currentDaySize.value+"px",height:0==t.weekday||6==t.weekday?e.lineBGHeight:"0px"}})]:e._e(),12==e.currentDaySize.value?[i("span",{staticClass:"dateNum",class:{isHover:t.width>=e.currentLineDay.start&&t.width<=e.currentLineDay.end,nodBorder:t.width>=e.currentLineDay.start&&t.width<=e.currentLineDay.end}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.width==e.currentLineDay.end&&e.isHover&&1!=t.date||t.width==e.currentLineDay.start&&e.isHover&&1!=t.date||1==t.date,expression:"\n                  (j.width == currentLineDay.end && isHover && j.date != 1) ||\n                    (j.width == currentLineDay.start &&\n                      isHover &&\n                      j.date != 1) ||\n                    j.date == 1\n                "}],staticStyle:{width:"100%",height:"100%","font-size":"10px!important"},style:{borderLeft:0==n?"none":"1px solid #d7d7d7"}},[e._v("\n                "+e._s(t.date)+"\n              ")])]),i("span",{staticClass:"dateBG weekday2",class:{today:t.today},staticStyle:{"border-right":"none"},style:{width:e.currentDaySize.value+"px",height:0==t.weekday||6==t.weekday?e.lineBGHeight:"0px"}})]:e._e()],2)}),0),i("div",{ref:"lineBG",staticClass:"lineBG",on:{scroll:e.handlerBGScroll}},[e._l(e.computedList,function(t,n){return[i("div",{directives:[{name:"show",rawName:"v-show",value:("1"==t.type||"2"==t.type)&&t.isShow,expression:"(item.type == '1' || item.type == '2') && item.isShow"}],key:t.id+n+"ccc",ref:"line"+t.id,refInFor:!0,staticClass:"line",style:{left:t.left+"px",width:t.widthMe+"px",top:t.top+"px"},on:{mousedown:function(i){return e.lineMousedown("line"+t.id,i,t.id,t.parentId,n)},mouseover:function(i){return e.lineMouseover("line"+t.id,i,t.id,t.parentId,n)},mouseleave:e.lineMouseleave,mouseenter:function(i){return e.lineMouseenter("line"+t.id,i,t.id,t.parentId,n)}}},[i("slider",{directives:[{name:"show",rawName:"v-show",value:"1"==t.type,expression:"item.type == '1'"}],attrs:{min:0,max:100,id:t.id,parentId:t.parentId,widths:t.widthChild},on:{thunkMousedown:e.thunkMousedown,thunkMouseup:e.thunkMouseup,thunkMousemove:e.thunkMousemove},model:{value:t.per,callback:function(i){e.$set(t,"per",i)},expression:"item.per"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.type,expression:"item.type == '1'"}],staticClass:"leftCurDrag",on:{mousedown:function(i){return i.stopPropagation(),e.leftCurDragMounsedown("line"+t.id,i,t.id,t.parentId,n)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.type,expression:"item.type == '1'"}],staticClass:"rightCurDrag",on:{mousedown:function(i){return i.stopPropagation(),e.rightCurDragMounsedown("line"+t.id,i,t.id,t.parentId,n)}}}),"2"==t.type?i("div",{staticClass:"stoneLine",style:{top:-t.top+"px",height:t.top+"px"},on:{mouseenter:e.stoneLineMouseenter}}):e._e(),"2"==t.type?i("div",{staticClass:"milestone"},[i("i",{staticClass:"el-icon-check"})]):e._e()],1),"3"==t.type?i("div",{key:t.id+"zzzzz",staticClass:"group",style:{top:t.top+"px",left:t.left+"px",width:t.widthMe+"px"}},[i("div",{staticClass:"progress",style:{width:t.per+"%"}})]):e._e()]})],2)]),i("div",{staticClass:"toolTip"},[i("div",{staticClass:"today base",on:{click:e.handleGoToday}},[e._v("今天")]),i("el-dropdown",{attrs:{trigger:"click"}},[i("span",{staticClass:"base"},[e._v("\n          "+e._s(this.currentDaySize.label)),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{style:{left:this.left+"px !important"},attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.currentDaySizeOptions,function(t){return i("el-dropdown-item",{key:t.value+"ck",nativeOn:{click:function(i){return e.handleSetDaySize(t)}}},[e._v(e._s(t.label))])}),1)],1)],1),i("transition",{attrs:{name:"el-zoom-in-center"}},[e.isShowMsg?i("div",{staticClass:"projectMsg",style:{left:e.currentProjectMsg.left+"px",top:e.currentProjectMsg.top+"px"}},[i("div",{staticClass:"lineMsg"},[i("span",{staticClass:"projectName"},[e._v(e._s(e.currentProjectMsg.name))])]),i("div",{staticClass:"lineMsg"},[i("span",{staticClass:"title"},[e._v("持续时间:")]),i("span",[e._v(e._s(e.currentProjectMsg.allTime)+"天")])]),i("div",{staticClass:"lineMsg"},[i("span",{staticClass:"title"},[e._v("当前进度:")]),i("span",[e._v(e._s(e.currentProjectMsg.per)+"%")])]),i("div",{staticClass:"lineMsg"},[i("span",{staticClass:"title"},[e._v("开始时间:")]),i("span",[e._v(e._s(e.currentProjectMsg.startTime))])]),i("div",{staticClass:"lineMsg"},[i("span",{staticClass:"title"},[e._v("结束时间:")]),i("span",[e._v(e._s(e.currentProjectMsg.endTime))])])]):e._e()])],2),i("el-dialog",{attrs:{title:e.title,visible:e.dialogVal,width:"500px","before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVal=t}}},[i("dialogAdd",{ref:"dialogAdd",attrs:{title:e.title,dialogVal:e.dialogVal,isChildren:e.isChildren},on:{"update:dialogVal":function(t){e.dialogVal=t},"update:dialog-val":function(t){e.dialogVal=t},submit:e.handleSave,handleEditSave:e.handleEditSave,onCancle:e.onCancle}})],1)],1)},h=[],p=(i("96cf"),i("3b8d")),m=(i("7514"),i("20d6"),i("ac6a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dialogAdd"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"top",rules:e.rules,size:"mini"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"负责人",prop:"ower"}},[i("el-select",{staticStyle:{width:"100%"},model:{value:e.form.ower,callback:function(t){e.$set(e.form,"ower",t)},expression:"form.ower"}},e._l(e.owerOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),"新建"==e.title?i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-select",{staticStyle:{width:"100%"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1):e._e(),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.type,expression:"form.type == 1"}],attrs:{label:"进度"}},[i("el-input-number",{attrs:{min:0,max:100},model:{value:e.form.per,callback:function(t){e.$set(e.form,"per",t)},expression:"form.per"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.type,expression:"form.type == 1"}],attrs:{label:"计划周期",prop:"planTime"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.form.planTime,callback:function(t){e.$set(e.form,"planTime",t)},expression:"form.planTime"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.form.type,expression:"form.type == 2"}],attrs:{label:"里程碑时间",prop:"stoneTime"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.form.stoneTime,callback:function(t){e.$set(e.form,"stoneTime",t)},expression:"form.stoneTime"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),i("el-button",{on:{click:e.onCancle}},[e._v("取消")])],1)],1)],1)}),f=[],w={props:{dialogVal:Boolean,owerOptions:Array,isChildren:Boolean,title:String},data:function(){return{form:{name:"",ower:"",per:0,type:"1",planTime:[],stoneTime:""},typeOptions:[{label:"计划项目",value:"1"},{label:"里程碑",value:"2"},{label:"分组",value:"3",disabled:!1}],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}],planTime:[{required:!0,message:"请输入时间",trigger:"blur"}],ower:[{message:"请选择负责人",trigger:"blur"}]}}},watch:{"form.type":function(e){1==e?this.rules={name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}],planTime:[{required:!0,message:"请输入时间",trigger:"blur"}],ower:[{message:"请选择负责人",trigger:"blur"}]}:2==e?this.rules={name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}],stoneTime:[{required:!0,message:"请输入时间",trigger:"blur"}],ower:[{message:"请选择负责人",trigger:"blur"}]}:3==e&&(this.rules={name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}],ower:[{message:"请选择负责人",trigger:"blur"}]})},isChildren:{handler:function(e){this.$set(this.typeOptions,2,{label:"分组",value:"3",disabled:e})},immediate:!0}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.$emit("update:dialogVal",!1),"新建"==e.title?e.isChildren?e.$emit("submit",e.form,!0):e.$emit("submit",e.form):"编辑"==e.title&&e.$emit("handleEditSave",e.form)})},onCancle:function(){this.$emit("update:dialogVal",!1),this.$refs.form.resetFields(),this.form.type="1",this.$emit("onCancle")},resetFields:function(){this.$refs.form.resetFields(),this.form.type="1"}}},v=w,y=(i("8af1"),Object(a["a"])(v,m,f,!1,null,"2e119f72",null)),T=y.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"slider",staticClass:"slider",style:{width:"100%"}},[i("div",{staticClass:"process",style:{width:e.width}}),i("div",{ref:"trunk",staticClass:"thunk",style:{left:e.left}},[i("div",{staticClass:"block"},[i("i",{staticClass:"el-icon-caret-top",on:{mousedown:function(t){return t.stopPropagation(),e.thunkMousedown(t)}}})]),e.isMove?i("div",{staticClass:"tips"},[i("span",[e._v(e._s(parseInt(100*e.scale)))]),i("i",{staticClass:"fas fa-caret-down"})]):e._e()])])},x=[],M={props:["min","max","value","widths","id","parentId"],data:function(){return{slider:null,thunk:null,per:this.value,isMove:!1}},watch:{value:function(e,t){this.per=e}},methods:{thunkMousedown:function(e){var t=this,i=parseInt(this.width),n=e.clientX;return this.$emit("thunkMousedown"),this.isMove=!0,document.onmousemove=function(e){var r=e.clientX-n+i,s=r/t.slider.offsetWidth;t.per=Math.ceil((t.max-t.min)*s+t.min),t.per=Math.max(t.per,t.min),t.per=Math.min(t.per,t.max),t.$emit("thunkMousemove",e,t.index)},document.onmouseup=function(e){t.isMove=!1,t.$emit("thunkMouseup",parseInt(100*t.scale),e,t.id,t.parentId),document.onmousemove=document.onmouseup=null},!1}},mounted:function(){this.slider=this.$refs.slider,this.thunk=this.$refs.trunk},computed:{scale:function(){return(this.per-this.min)/(this.max-this.min)},width:function(){return this.slider?this.widths*this.scale+"px":"0px"},left:function(){return this.slider?this.widths*this.scale-this.thunk.offsetWidth/2+"px":"0px"}}},b=M,S=(i("6468"),Object(a["a"])(b,g,x,!1,null,null,null)),D=S.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tableMneu"},[e.isShowHeaderBox||e.menuOpen?i("div",{staticClass:"mask",on:{click:e.maskClick}}):e._e(),i("el-table",{ref:"tableMenu",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","row-key":"id",height:"100%","default-expand-all":"","highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"row-click":e.handlerRowClick,"expand-change":e.handlerExpand}},[e._l(e.columns,function(t){return i("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,align:t.align,resizable:t.resizable},scopedSlots:e._u([{key:"default",fn:function(n){return["type"==t.prop?i("span",[e._v(e._s(e.projectType[n.row.type]))]):i("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)})}),i("el-table-column",{attrs:{align:"center",resizable:!1,width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-more icons",on:{click:function(i){return i.stopPropagation(),e.handleRowMore(t.row,i)}}})]}}])},[i("template",{slot:"header"},[i("i",{staticClass:"el-icon-setting icons",on:{click:e.handleShowHeaderCheckBox}})])],2)],2),i("el-collapse-transition",[e.isShowHeaderBox?i("div",{staticClass:"headerBox"},[i("div",{staticClass:"title"},[e._v("\n        选择表头显示内容\n      ")]),i("div",{staticClass:"main"},[e._l(e.columnsCopy,function(t){return i("div",{key:t.prop+"cc",staticClass:"line"},[i("div",{staticClass:"pre"},[e._v(e._s(t.label))]),i("el-checkbox",{attrs:{disabled:"name"==t.prop},model:{value:e.headerList[t.prop],callback:function(i){e.$set(e.headerList,t.prop,i)},expression:"headerList[item.prop]"}})],1)}),i("div",{staticClass:"line",staticStyle:{"justify-content":"center"}},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.isShowHeaderBox=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handlerSave}},[e._v("确定")])],1)],2)]):e._e()]),i("transition",{attrs:{name:"el-zoom-in-top"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.menuOpen,expression:"menuOpen"}],ref:"menulist",staticClass:"menulist"},e._l(e.menuLists,function(t,n){return i("div",{key:t+n,staticClass:"item",on:{click:function(i){return e.handleMenuClick(n,t)}}},[e._v("\n        "+e._s(t)+"\n      ")])}),0)])],1)},k=[],L=(i("c5f6"),{props:{list:Array,BGScrollTop:Number},computed:{tableData:function(){return this.list}},watch:{BGScrollTop:{handler:function(e){var t=this.$refs.tableMenu.bodyWrapper;t.scrollTo(0,e)}}},data:function(){return{checkList:[],isShowHeaderBox:!1,menuOpen:!1,headerList:{name:!0,ower:!0,per:!0,type:!0},projectType:{1:"计划项目",2:"里程碑",3:"分组"},menuLists:["编辑","里程碑","分组","删除"],columns:[{prop:"name",label:"名称",width:"200px",resizable:!1},{prop:"ower",label:"负责人",align:"center",resizable:!1},{prop:"per",label:"进度",align:"center",resizable:!1},{prop:"type",label:"项目类型",align:"center",resizable:!1}],columnsCopy:[{prop:"name",label:"名称",width:"200px",resizable:!1},{prop:"ower",label:"负责人",align:"center",resizable:!1},{prop:"per",label:"进度",align:"center",resizable:!1},{prop:"type",label:"项目类型",align:"center",resizable:!1}],currentRow:{}}},methods:{handlerWatchScroll:function(){var e=this,t=this.$refs.tableMenu.bodyWrapper;t.addEventListener("scroll",function(t){e.$emit("TableScrollTop",t.srcElement.scrollTop)})},handlerSelect:function(e){this.$refs.tableMenu.setCurrentRow(e)},handlerExpand:function(e,t){this.$emit("handlerExpand",e,t)},handlerSave:function(){var e=this;this.isShowHeaderBox=!1;var t=[];this.columnsCopy.forEach(function(i){1==e.headerList[i.prop]&&t.push(i)}),this.columns=t},maskClick:function(){this.isShowHeaderBox=!1,this.menuOpen=!1,this.currentRow={}},handlerRowClick:function(e,t){3!=e.type&&this.$emit("handlerRowClick",e)},handleRowMore:function(e,t){this.menuLists=["编辑","里程碑","分组","删除"],e.parentId&&(this.menuLists=["编辑","里程碑","删除"]),"1"==e.type?this.menuLists[1]="里程碑":"2"==e.type?this.menuLists[1]="计划项目":"3"==e.type&&(this.menuLists=["编辑","添加任务","删除分组"]),this.menuOpen=!0,this.currentRow=e;var i=this.$refs.menulist.style;i.top=t.y-10-40+"px",i.left=t.x+20+"px"},handleShowHeaderCheckBox:function(){this.isShowHeaderBox=!this.isShowHeaderBox},handleMenuClick:function(e,t){var i=this;if(this.menuOpen=!1,3==e)this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.$emit("handlerDel",i.currentRow)}).catch(function(){});else if(1==e){if(3==this.currentRow.type)return console.log("添加任务"),void this.$emit("handleGroupAdd",this.currentRow);this.$confirm("确定转为".concat(this.menuLists[1],"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){"1"==i.currentRow.type?i.$emit("milestone",i.currentRow):"2"==i.currentRow.type&&i.$emit("planProject",i.currentRow)}).catch(function(){})}else if(0==e)this.$emit("handlerEdit",this.currentRow);else if(2==e){if(console.log(t),3==this.currentRow.type&&"删除分组"==t)return void this.$confirm("此操作将永久删除该分组及其子项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.$emit("handlerDel",i.currentRow)}).catch(function(){});if("删除"==t)return void this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.$emit("handlerDel",i.currentRow)}).catch(function(){});this.$confirm("确定转为分组？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){i.$emit("handlerGroup",i.currentRow)}).catch(function(){})}}},mounted:function(){this.handlerWatchScroll()}}),I=L,z=(i("3f81"),i("62ac"),Object(a["a"])(I,C,k,!1,null,"416b9c2f",null)),_=z.exports,$={components:{slider:D,leftMenu:_,dialogAdd:T},data:function(){return{isChildren:!1,dialogVal:!1,title:"新建",timer:null,rightLineX:600,fixdTopMonth:"",allDays:[],days:[],monthArr:[1,2,3,4,5,6,7,8,9,10,11,12],list:[],currentLineDay:{start:0,end:0},currentDaySize:{label:"天",value:40},currentDaySizeOptions:[{label:"天",value:40},{label:"周",value:24},{label:"月",value:12}],isShowMsg:!1,currentProjectMsg:{name:"",allTime:0,per:0,startTime:0,endTime:0,left:0,top:0},isHover:!1,showFixdTopMonth:!1,currentListIndex:"",editRow:[],currentRow:null,BGScrollTop:0,lineBGHeight:0,expandArr:[]}},computed:{computedList:function(){var e=[];return this.list.forEach(function(t){!t.children||t.children.length<1?e.push(t):t.children&&t.children.length>=1&&(e.push(t),e=e.concat(t.children))}),e},left:function(){return window.innerWidth-30},currentYear:function(){return(new Date).getFullYear()},currentMonth:function(){return(new Date).getMonth()+1},currentDay:function(){return(new Date).getDate()}},methods:{TableScrollTop:function(e){var t=this.$refs.lineBG;t.scrollTo(0,e)},handlerBGScroll:function(e){this.BGScrollTop=e.srcElement.scrollTop},handlerSaveData:function(){console.log(this.list)},handlerCheckList:function(){var e=this,t=[{name:"1",ower:"",per:0,type:"3",planTime:[],stoneTime:"",startTime:"",endTime:"",id:1589269666397,isShow:!0,children:[{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:1,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:2,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:3,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:4,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:5,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:41,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:42,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:444,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:43,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:4441,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:4332,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:44411,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:43321,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:444112,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:433211,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:6,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:7,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:8,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:9,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:10,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:11,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:12,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:13,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:14,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:15,parentId:1568028397666},{name:"1",ower:"",type:"1",stoneTime:"",per:0,startTime:15679584e5,endTime:15682176e5,id:16,parentId:1568028397666}]},{name:"3",ower:"",per:100,type:"2",planTime:[],stoneTime:1589472e6,startTime:1589472e6,endTime:1589472e6,id:1589269688345,isShow:!0},{name:"4",ower:"",per:100,type:"2",planTime:[],stoneTime:15895584e5,startTime:15895584e5,endTime:15895584e5,id:1589269707819,isShow:!0}];t.forEach(function(i,n){i.planTime=[],i.left=3==i.type?"":e.computedTimeWidth(i.startTime),i.widthMe=i.widthChild=3==i.type?"":e.computedTimeWidth(i.startTime,i.endTime),i.isShow=!0,n-1<0?(i.top=15,3==i.type&&(i.isexpand=!0,i.children.length>0&&i.children.forEach(function(t,n){t.planTime=[],t.top=i.top+40*n+35,t.isShow=!0,t.left=e.computedTimeWidth(t.startTime),t.widthMe=t.widthChild=e.computedTimeWidth(t.startTime,t.endTime)}))):3==t[n-1].type?(i.top=t[n-1].top+40*t[n-1].children.length+40,3==i.type&&(i.isexpand=!0,i.children.length>0&&i.children.forEach(function(t,n){t.planTime=[],t.top=i.top+40*n,t.isShow=!0,t.left=e.computedTimeWidth(t.startTime),t.widthMe=t.widthChild=e.computedTimeWidth(t.startTime,t.endTime)}))):i.top=t[n-1].top+40}),t.forEach(function(i){3==i.type&&(e.setGroupWidth(i.id,t),e.setGroupPer(i.id,t))}),this.list=t,this.setStoneLine(1),window.scrollTo({top:0,left:this.list[0].left-100,behavior:"smooth"})},handlerSelect:function(e){this.$refs.leftMenu.handlerSelect(e)},handlerExpand:function(e,t){var i=this.list.findIndex(function(t){return t.id==e.id});this.list[i].expand=t,this.list[i].children&&this.list[i].children.length>0&&this.list[i].children.forEach(function(e){e.isShow=t}),this.resetTop(i,!t,!0)},handleGroupAdd:function(e){var t=this;this.$nextTick(function(){t.$refs.dialogAdd.resetFields()}),this.currentListIndex=this.list.findIndex(function(t){return t.id==e.id}),this.dialogVal=!0,this.isChildren=!0},handlerEdit:function(e){var t=this;this.title="编辑",this.dialogVal=!0;var i={};if(e.parentId){this.editRow[0]=e.parentId,this.editRow[1]=e.id;var n=this.list.find(function(t){return t.id==e.parentId}),r=n.children.find(function(t){return t.id==e.id}),s=r.name,a=r.ower,o=r.type,l=r.planTime,d=r.stoneTime,c=r.per;i={name:s,ower:a,type:o,planTime:l,stoneTime:d,per:c},2==o&&(i.stoneTime=this.computedWithTime(r.left,!0)),i.planTime[0]=this.computedWithTime(r.left,!0),i.planTime[1]=this.computedWithTime(r.left+r.widthMe-this.currentDaySize.value,!0),this.$nextTick(function(){t.$refs.dialogAdd.form=i})}else{this.editRow[0]=e.id;var u=this.list.find(function(t){return t.id==e.id}),h=u.name,p=u.ower,m=u.type,f=u.planTime,w=u.stoneTime,v=u.per;i={name:h,ower:p,type:m,planTime:f,stoneTime:w,per:v},2==m&&(i.stoneTime=this.computedWithTime(u.left,!0)),i.planTime[0]=this.computedWithTime(u.left,!0),i.planTime[1]=this.computedWithTime(u.left+u.widthMe-this.currentDaySize.value,!0),this.$nextTick(function(){t.$refs.dialogAdd.form=i})}},handlerDel:function(e){if(e.parentId){var t=this.list.find(function(t){return t.id==e.parentId}),i=this.list.findIndex(function(t){return t.id==e.parentId}),n=t.children.findIndex(function(t){return t.id==e.id});t.children.splice(n,1),t.children[n]&&t.children.forEach(function(e,t){t>=n&&(e.top=e.top-40)}),this.setGroupWidth(e.parentId),this.setGroupPer(e.parentId),this.resetTop(i,!0),this.$set(this.list,i,t)}else{var r=this.list.findIndex(function(t){return t.id==e.id});this.list.splice(r,1),3==e.type&&e.expand?this.retDelTop(r,e.children.length+1):this.retDelTop(r,1)}},handleClose:function(e){this.currentListIndex="",this.isChildren=!1,this.editRow=[],this.$refs.dialogAdd.resetFields(),this.$refs.dialogAdd.form.per=0,e()},onCancle:function(){this.currentListIndex="",this.isChildren=!1,this.$refs.dialogAdd.form.per=0,this.editRow=[]},handleEditSave:function(e){var t=this;if(1==this.editRow.length){var i=this.list.find(function(e){return e.id==t.editRow[0]});i=Object.assign(i,e),i.planTime=e.planTime,3!=i.type&&(i.startTime=e.stoneTime?e.stoneTime:e.planTime[0],i.endTime=e.stoneTime?e.stoneTime:e.planTime[1],i.left=this.computedTimeWidth(i.startTime),i.widthChild=i.widthMe=this.computedTimeWidth(i.startTime,i.endTime),i.per=e.per)}else if(2==this.editRow.length){var n=this.list.find(function(e){return e.id==t.editRow[0]}),r=n.children.find(function(e){return e.id==t.editRow[1]});r=Object.assign(r,e),r.planTime=e.planTime,r.startTime=e.stoneTime?e.stoneTime:e.planTime[0],r.endTime=e.stoneTime?e.stoneTime:e.planTime[1],r.left=this.computedTimeWidth(r.startTime),r.widthChild=r.widthMe=this.computedTimeWidth(r.startTime,r.endTime),this.setGroupWidth(this.editRow[0])}this.editRow=[],this.$refs.dialogAdd.form.per=0},computedTimeWidth:function(e,t){var i=Math.floor(e-new Date("".concat(this.currentYear-1,"/01/01")).getTime())/864e5*this.currentDaySize.value,n=Math.floor(t-e)/864e5*this.currentDaySize.value+this.currentDaySize.value;return t?n:i},handleSave:function(){var e=Object(p["a"])(regeneratorRuntime.mark(function e(t,i){var n,r,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=Object.assign({},t),r=this.list.length,n.startTime=n.planTime.length>0?n.planTime[0]:n.stoneTime,n.endTime=n.planTime.length>0?n.planTime[1]:n.stoneTime,3!=n.type&&(n.left=this.computedTimeWidth(n.startTime),n.widthMe=n.widthChild=this.computedTimeWidth(n.startTime,n.endTime),0==r?n.top=15:this.list[r-1].children&&this.list[r-1].children.length>0?n.top=this.list[r-1].children[this.list[r-1].children.length-1].top+40:n.top=this.list[r-1].top+40),2==n.type&&(n.per=100),3==n.type&&(n.per=0,n.id=(new Date).getTime(),n.expand=!0,0==r?n.top=15:this.list[r-1].children&&this.list[r-1].children.length>0?n.top=this.list[r-1].children[this.list[r-1].children.length-1].top+40:n.top=this.list[r-1].top+40),n.id=(new Date).getTime(),n.isShow=!0,i&&""!==this.currentListIndex?(s=this.list[parseInt(this.currentListIndex)],s.children=s.children?s.children:[],a=s.children.length,n.top=40+40*a+s.top,n.parentId=s.id,s.children.push(n),s.children.forEach(function(e){e.isShow=!0}),this.setGroupWidth(s.id),this.setGroupPer(s.id),this.resetTop(this.currentListIndex),this.$set(this.list,parseInt(this.currentListIndex),s)):this.list.push(n),this.currentListIndex="",this.isChildren=!1,this.$refs.dialogAdd.resetFields(),this.$refs.dialogAdd.form.per=0,this.handlerRowClick(n),this.handlerCheckIsExpandRow();case 16:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),handlerCheckIsExpandRow:function(){var e=this;this.$nextTick(function(){0!=e.expandArr.length&&(e.expandArr.forEach(function(t){e.$refs.leftMenu.$refs.tableMenu.toggleRowExpansion(e.list[t],!1)}),e.list.forEach(function(t,i){i>e.expandArr[0]&&(t.top=t.top+40,t.children&&t.children.length>0&&t.expand&&t.children.forEach(function(e){e.top=e.top+40}))}))})},resetTop:function(e,t,i){var n=this,r=t?-40:40;t||i?this.list.forEach(function(t,i){i>e&&(t.top=t.top+r*n.list[e].children.length,t.children&&t.children.length>0&&t.children.forEach(function(e,i){e.top=t.top+40*i+40}))}):this.list.forEach(function(t,i){i>e&&(t.top=t.top+40,t.children&&t.children.length>0&&t.children.forEach(function(e,i){e.top=t.top+40*i+40}))})},retDelTop:function(e,t){this.list.forEach(function(i,n){n>=e&&(i.top=i.top-40*t,i.children&&i.children.length>0&&i.children.forEach(function(e,t){e.top=i.top+40*t+40}))})},setGroupWidth:function(e,t){var i;i=t?t.find(function(t){return t.id==e}):this.list.find(function(t){return t.id==e});var n=Math.min.apply(Math,i.children.map(function(e){return e.left})),r=[];i.children.forEach(function(e){r.push(e.left+e.widthMe)});var s=Math.max.apply(Math,r),a=s-n;i.widthMe=i.widthChild=a,i.left=n},handlerAddGantt:function(){var e=this;this.dialogVal=!0,this.title="新建";var t=[];this.list.forEach(function(e,i){e.children&&e.children.length>0&&0==e.expand&&(console.log(e.children&&e.children.length>0&&0==e.expand),t.push(i))}),this.expandArr=t,this.$nextTick(function(){e.$refs.dialogAdd.resetFields()})},handlerGroup:function(e){var t=this.list.findIndex(function(t){return t.id==e.id});this.list[t].type="3",this.list[t].per=0,this.list[t].id=(new Date).getTime(),this.list[t].left=0,this.list[t].widthMe=this.list[t].widthChild=0,this.$set(this.list,t,this.list[t])},stoneLineMouseenter:function(){this.isShowMsg=!1,this.currentLineDay={start:0,end:0}},handlerPlanProject:function(e){var t=this;if(e.parentId){var i=this.list.findIndex(function(t){return t.id==e.parentId});this.list[i].children.forEach(function(i){i.id==e.id&&(i.type="1",i.per=0,i.stoneTime="",i.left=e.left+e.widthMe-t.currentDaySize.value,i.widthMe=i.widthChild=t.currentDaySize.value)}),this.setGroupPer(e.parentId),this.$set(this.list,i,this.list[i])}else{var n=this.list.findIndex(function(t){return t.id==e.id});this.list[n].type="1",this.list[n].stoneTime="",this.list[n].per=0,this.list[n].left=e.left+e.widthMe-this.currentDaySize.value,this.list[n].widthMe=this.currentDaySize.value,this.list[n].widthChild=this.currentDaySize.value}},handlerMilestone:function(e){if(e.parentId){var t=this.list.findIndex(function(t){return t.id==e.parentId}),i=this.list.find(function(t){return t.id==e.parentId}),n=i.children.find(function(t){return t.id==e.id});n.type="2",n.per=100,n.left=e.left+e.widthMe-this.currentDaySize.value,n.widthMe=this.currentDaySize.value,n.widthChild=this.currentDaySize.value,this.setGroupPer(e.parentId),this.setGroupWidth(e.parentId),this.$set(this.list,t,i),this.setStoneLine()}else{var r=this.list.findIndex(function(t){return t.id==e.id});this.list[r].per=100,this.list[r].type="2",this.list[r].left=e.left+e.widthMe-this.currentDaySize.value,this.list[r].widthMe=this.currentDaySize.value,this.list[r].widthChild=this.currentDaySize.value,this.setStoneLine()}},rightLineMousedown:function(e){var t,i=this,n=e.clientX;document.onmousemove=function(e){t=e.clientX-n,n+t<=441||(i.$refs.rightLine.style.left=n+t+"px")},document.onmouseup=function(){document.onmousemove=document.onmouseup=null,i.rightLineX=n+t<=441?441:n+t}},handlerRowClick:function(e){this.currentRow=e,window.scrollTo({top:0,left:e.left-100,behavior:"smooth"})},handleSetDaySize:function(e){var t=this;if(this.currentDaySize=e,this.days.forEach(function(e,i){e.width=(i+1)*t.currentDaySize.value}),this.handleScroll(),this.currentRow){var i=this.computedList.find(function(e){return e.id==t.currentRow.id});this.$nextTick(function(){window.scrollTo(i.left-100,0)})}},thunkMousemove:function(){this.isShowMsg=!1},thunkMousedown:function(){this.isShowMsg=!1},thunkMouseup:function(e,t,i,n){var r=this.computedList.findIndex(function(e){return e.id==i});if(n){var s=this.list.findIndex(function(e){return e.id==n});this.list.forEach(function(t){t.id==n&&t.children.forEach(function(t){t.id==i&&(t.per=e)})}),this.setGroupPer(n),this.$set(this.list,s,this.list[s])}else this.list.forEach(function(t){t.id==i&&(t.per=e)});this.checkIsin("line".concat(i),t,i,n,r)},setGroupPer:function(e,t){var i;i=t?t.find(function(t){return t.id==e}):this.list.find(function(t){return t.id==e});var n=0,r=i.children.length;i.children.forEach(function(e){n+=e.per/100*(1/r)}),i.per=Math.round(100*n)},handleGoToday:function(){var e=Math.round(window.innerWidth/this.currentDaySize.value/2)*this.currentDaySize.value-this.rightLineX,t=Math.floor(new Date("".concat(this.currentYear,"/").concat(this.currentMonth,"/").concat(this.currentDay)).getTime()-new Date("".concat(this.currentYear-1,"/01/01")).getTime())/864e5*this.currentDaySize.value-e;window.scrollTo({top:0,left:t,behavior:"smooth"})},leftCurDragMounsedown:function(e,t,i,n,r){var s,a,o,l,d=this,c=this.$refs[e][0],u=t.pageX,h=0,p=0;document.onmousemove=function(m){m.clientX<=d.rightLineX+80&&m.pageX>=d.rightLineX+80?d.timer||(d.timer=window.setInterval(function(){h=window.scrollX-d.currentDaySize.value,window.scrollTo({top:0,left:h,behavior:"smooth"}),o=u-m.pageX},50)):m.clientX>=window.innerWidth-80?l||(l=window.setInterval(function(){p=window.scrollX+d.currentDaySize.value,window.scrollTo({top:0,left:p,behavior:"smooth"}),o=-(m.pageX-u)},50)):(window.clearInterval(d.timer),window.clearInterval(l),d.timer=null,l=null,o=m.pageX<=d.rightLineX?-(d.rightLineX-2-u):-(m.pageX-u)),s=d.computedList[r].widthMe+o,a=d.computedList[r].left-o,s<=d.currentDaySize.value?(s=d.currentDaySize.value,a=d.computedList[r].left+d.computedList[r].widthMe-d.currentDaySize.value):a<=0&&(a=0),c.style.width=s+"px",c.style.left=a+"px",d.computedList[r].widthChild=s,d.lineMouseover(e,t,i,n,r),d.lineMouseleave(t,!0)},document.onmouseup=function(t){s?(window.clearInterval(d.timer),window.clearInterval(l),d.timer=null,l=null,s=Math.round(s/d.currentDaySize.value)*d.currentDaySize.value,a=Math.round(parseInt(c.style.left)/d.currentDaySize.value)*d.currentDaySize.value,d.computedList[r].widthMe=s,d.computedList[r].widthChild=s,c.style.width=s+"px",d.computedList[r].left=a,c.style.left=a+"px",d.checkIsin(e,t,i,n,r),n?(d.list.forEach(function(e){e.id==n&&e.children.forEach(function(e){e.id==i&&(e.widthMe=e.widthChild=s,e.left=a)})}),d.setGroupWidth(n)):d.list.forEach(function(e){e.id==i&&(e.widthMe=e.widthChild=s,e.left=a)}),document.onmousemove=document.onmouseup=null):document.onmousemove=document.onmouseup=null}},rightCurDragMounsedown:function(e,t,i,n,r){var s,a,o,l=this,d=this.$refs[e][0],c=t.pageX,u=0,h=0,p=window.scrollX;document.onmousemove=function(m){m.clientX>=window.innerWidth-80?l.timer||(u=0,p=window.scrollX,l.timer=window.setInterval(function(){u+=l.currentDaySize.value,window.scrollTo({top:0,left:u+p,behavior:"smooth"}),a=m.pageX-c+u},50)):m.clientX<=l.rightLineX+80?o||(o=window.setInterval(function(){h=window.scrollX-l.currentDaySize.value,window.scrollTo({top:0,left:h,behavior:"smooth"}),a=m.pageX-c},50)):(window.clearInterval(l.timer),window.clearInterval(o),l.timer=null,o=null,a=m.pageX-c),s=l.computedList[r].widthMe+a,s+parseInt(d.style.left)>=l.days.length*l.currentDaySize.value&&(s=l.days.length*l.currentDaySize.value-parseInt(d.style.left)),d.style.width=s+"px",l.computedList[r].widthChild=s,s<=l.currentDaySize.value&&(s=l.currentDaySize.value,d.style.width=s+"px",l.computedList[r].widthMe=s,l.computedList[r].widthChild=s),l.lineMouseover(e,t,i,n,r),l.lineMouseleave(t,!0)},document.onmouseup=function(t){s?(window.clearInterval(l.timer),window.clearInterval(o),l.timer=null,o=null,s=Math.round(s/l.currentDaySize.value)*l.currentDaySize.value,l.computedList[r].widthMe=s,l.computedList[r].widthChild=s,d.style.width=s+"px",l.checkIsin(e,t,i,n,r),n?(l.list.forEach(function(e){e.id==n&&e.children.forEach(function(e){e.id==i&&(e.widthMe=e.widthChild=s)})}),l.setGroupWidth(n)):l.list.forEach(function(e){e.id==i&&(e.widthMe=e.widthChild=s)}),document.onmousemove=document.onmouseup=null):document.onmousemove=document.onmouseup=null}},computedWithTime:function(e,t){var i=e/this.currentDaySize.value*864e5+new Date("".concat(this.currentYear-1,"/01/01")).getTime(),n=new Date(i);return t&&1==t?n.getTime():t&&"YD"==t?"".concat(n.getFullYear(),"年").concat(n.getMonth()+1,"月"):"".concat(n.getFullYear(),"年").concat(n.getMonth()+1,"月").concat(n.getDate(),"日")},checkIsin:function(e,t,i,n,r){var s=this.$refs[e][0],a=parseInt(s.style.top),o=a+16,l=parseInt(s.style.left),d=parseInt(this.computedList[r].widthMe)+l;t.pageX-this.rightLineX>=l&&t.pageX-this.rightLineX<=d&&t.y-40>=a&&t.y-40<=o?(this.lineMouseover(e,t,i,n,r),this.lineMouseenter(e,t,i,n,r)):(this.isShowMsg=!1,this.currentLineDay={start:0,end:0})},lineMouseover:function(e,t,i,n,r){var s=Math.round(parseInt(this.$refs[e][0].style.left)/this.currentDaySize.value)*this.currentDaySize.value+this.currentDaySize.value,a=parseInt(this.$refs[e][0].style.left)+parseInt(this.$refs[e][0].style.width);a=Math.round(a/this.currentDaySize.value)*this.currentDaySize.value,this.currentLineDay={start:s,end:a},this.isHover=!0,this.handlerSelect(this.computedList[r]),this.lineMouseenter(e,t,i,n,r)},lineMouseenter:function(e,t,i,n,r){var s=Math.round(parseInt(this.$refs[e][0].style.left)/this.currentDaySize.value)*this.currentDaySize.value,a=parseInt(this.$refs[e][0].style.left)+parseInt(this.$refs[e][0].style.width);a=Math.round(a/this.currentDaySize.value)*this.currentDaySize.value-this.currentDaySize.value,this.currentProjectMsg={name:this.computedList[r].name,allTime:(a-s)/this.currentDaySize.value+1,per:this.computedList[r].per,startTime:this.computedWithTime(s),endTime:this.computedWithTime(a),left:t.pageX+220-window.scrollX>=window.innerWidth?t.pageX-220-600:t.pageX+50-600,top:t.y+20},this.isShowMsg=!0},lineMouseleave:function(e,t){if(t)return this.isShowMsg=!1,void(this.currentProjectMsg={name:"",allTime:0,per:0,startTime:0,endTime:0,left:0,top:0});this.currentLineDay={start:0,end:0},this.isHover=!1,this.isShowMsg=!1,this.currentProjectMsg={name:"",allTime:0,per:0,startTime:0,endTime:0,left:0,top:0},this.handlerSelect()},lineMousedown:function(e,t,i,n,r){var s,a,o=this,l=this.$refs[e][0],d=t.pageX,c=0;document.onmousemove=function(a){if(a.clientX>=window.innerWidth-40){c=window.scrollX+o.currentDaySize.value,window.scrollTo({top:0,left:c,behavior:"smooth"});var u=a.pageX-d;s=o.computedList[r].left+u,l.style.left=s+"px",s<=0&&(s=0)}else if(a.clientX<=40+o.rightLineX){c=window.scrollX-o.currentDaySize.value,window.scrollTo({top:0,left:c,behavior:"smooth"});var h=a.pageX-d;s=o.computedList[r].left+h,s<=0&&(s=0),l.style.left=s+"px"}else{var p=a.pageX-d;s=o.computedList[r].left+p,s<=0&&(s=0),l.style.left=s+"px"}o.lineMouseover(e,t,i,n,r),o.lineMouseleave(t,!0)},document.onmouseup=function(t){s?(a=Math.round(s/o.currentDaySize.value)*o.currentDaySize.value,o.computedList[r].left=a,l.style.left=a+"px",o.checkIsin(e,t,i,n,r),n?(o.list.forEach(function(e){e.id==n&&e.children.forEach(function(e){e.id==i&&(e.left=a)})}),o.setGroupWidth(n)):o.list.forEach(function(e){e.id==i&&(e.left=a)}),document.onmousemove=document.onmouseup=null):document.onmousemove=document.onmouseup=null}},getDay:function(){this.getAllDate()},isLeapYear:function(e){return e%4>0},getAllDate:function(){var e=this,t={},i=[this.currentYear-1,this.currentYear,this.currentYear+1];i.forEach(function(i){t.year=i,t.days=e.isLeapYear(i)?365:366,e.allDays.push(t),t={}}),this.checkDate()},checkDate:function(){var e=this;this.allDays.forEach(function(t){t.month=e.handleMonthDay(t.days,t.year)}),this.allDays.forEach(function(t){t.year==e.currentYear&&t.month[0][e.currentMonth].forEach(function(t){t.date==e.currentDay&&(t.today=!0)})});var t=[];this.allDays.forEach(function(e){t=t.concat(e.month)}),t.forEach(function(t){for(var i in t)e.days=e.days.concat(t[i])}),this.days.forEach(function(t,i){t.width=(i+1)*e.currentDaySize.value})},handleMonthDay:function(e,t){var i=this,n=[],r={};this.monthArr.forEach(function(t){r[t]=i.checkMonthDays(t,e)}),n.push(r);var s=n[0];for(var a in s)s[a]=this.addNum(s[a],a,t);return n},addNum:function(e,t,i){for(var n=[],r={},s=1;s<=e;s++)r.date=s,r.weekday=new Date("".concat(i,"/ ").concat(t," / ").concat(s)).getDay(),n.push(r),r={};return n},checkMonthDays:function(e,t){var i;switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return i=365==t?28:29,i}},setList:function(){},setStoneLine:function(e){var t=this;this.$nextTick(function(){var e=window.getComputedStyle(document.getElementsByClassName("lineBG")[0]).height;t.lineBGHeight=e})},handleScroll:function(){var e=window.scrollX;this.showFixdTopMonth=!(e<=62);var t=this.computedWithTime(e,"YD");this.fixdTopMonth=t}},watch:{currentDaySize:function(e,t){this.list.forEach(function(i){i.left=i.left/t.value*e.value,i.widthMe=i.widthChild=i.widthMe/t.value*e.value,i.children&&i.children.length>0&&i.children.forEach(function(i){i.left=i.left/t.value*e.value,i.widthMe=i.widthChild=i.widthMe/t.value*e.value})})}},mounted:function(){document.addEventListener("scroll",this.handleScroll),this.getDay(),this.setList(),this.setStoneLine()},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll),document.onmousemove=document.onmouseup=null}},E=$,X=(i("2646"),Object(a["a"])(E,u,h,!1,null,"79ac7dc6",null)),G=X.exports;n["default"].use(c["a"]);var B=new c["a"]({base:"",routes:[{path:"/",name:"gant",component:G}]}),j=i("2f62");n["default"].use(j["a"]);var R=new j["a"].Store({state:{},mutations:{},actions:{}}),W=i("8533"),P=i("5c96"),O=i.n(P),A=(i("0fae"),i("450d"),i("5488")),H=i.n(A);n["default"].component(H.a.name,H.a),n["default"].use(W["a"]),n["default"].use(O.a),n["default"].config.productionTip=!1,new n["default"]({router:B,store:R,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var n=i("5e27"),r=i.n(n);r.a},"5e27":function(e,t,i){},"62ac":function(e,t,i){"use strict";var n=i("cb60"),r=i.n(n);r.a},6468:function(e,t,i){"use strict";var n=i("e375"),r=i.n(n);r.a},7781:function(e,t,i){},"8af1":function(e,t,i){"use strict";var n=i("7781"),r=i.n(n);r.a},"9bf3":function(e,t,i){},cb60:function(e,t,i){},e375:function(e,t,i){}});